(()=>{"use strict";class t{constructor(t,e,s,n){this._name=t,this._description=e,this._dueDate=s,this._project=n}getName(){return this._name}setName(t){this._name=t}getDescription(){return this._description}setDescription(t){this._description=t}getDueDate(){return this._dueDate}setDueDate(t){this._dueDate=t}get project(){return this._project}set project(t){this._project=t}}class e{constructor(t){this._tasks=[],this._title=t}getTitle(){return this._title}setTitle(t){this._title=t}getTasks(){return this._tasks}setTasks(t){this._tasks=t}getTask(t){return this._tasks.find((e=>e.getName()==t))}addTask(t){this._tasks.push(t)}deleteTask(t){this._tasks=this._tasks.filter((e=>e.getName()!=t))}}class s{constructor(t,e,s,n){this._name=t,this._description=e,this._dueDate=s,this._project=n}getName(){return this._name}setName(t){this._name=t}getDescription(){return this._description}setDescription(t){this._description=t}getDueDate(){return this._dueDate}setDueDate(t){this._dueDate=t}get project(){return this._project}set project(t){this._project=t}}class n{constructor(t){this._tasks=[],this._title=t}getTitle(){return this._title}setTitle(t){this._title=t}getTasks(){return this._tasks}setTasks(t){this._tasks=t}getTask(t){return this._tasks.find((e=>e.getName()==t))}addTask(t){this._tasks.push(t)}deleteTask(t){this._tasks=this._tasks.filter((e=>e.getName()!=t))}}class i{constructor(){this._projects=[],this._projects.push(new n("Todo"))}getProjects(){return this._projects}setProjects(t){this._projects=t}getProject(t){return this._projects.find((e=>e.getTitle()==t))}addProject(t){this._projects.push(t)}deleteProject(t){this._projects=this._projects.splice(this._projects.findIndex((e=>e.name==t)),1)}}class c{static saveList(t){localStorage.setItem("list",JSON.stringify(t))}static getList(){const t=Object.assign(new i,JSON.parse(localStorage.getItem("list")));return t.getProjects().length<=1?new i:(t.setProjects(t.getProjects().map((t=>Object.assign(new n,t)))),t.getProjects().forEach((t=>t.setTasks(t.getTasks().map((t=>Object.assign(new s,t)))))),t)}static addProject(t){const e=c.getList();e.addProject(t),c.saveList(e)}static deleteProject(t){const e=c.getList();e.deleteProject(t),c.saveList(e)}static addTask(t,e){const s=c.getList();s.getProject(t).addTask(e),c.saveList(s)}static deleteTask(t,e){const s=c.getList();s.getProject(t).deleteTask(e),c.saveList(s)}}function r(t){const e=document.querySelector("nav");e.innerHTML="";const s=c.getList().getProjects();for(let t of s)e.append(a(t));const n=document.createElement("button");n.id="add_button",n.textContent="+ ADD PROJECT",n.addEventListener("click",(()=>{d("project")})),e.append(n)}function a(t){const e=document.createElement("button");return e.id=`${t.getTitle()}_button`,e.textContent=t.getTitle(),e.addEventListener("click",(()=>{o(t)})),e}function o(t){const e=document.querySelector("section");e.innerHTML="",e.id=`${t.getTitle()}`;let s=c.getList().getProject(t.getTitle()).getTasks();for(let t of s)e.append(l(t));const n=document.createElement("button");n.id="add_task",n.textContent="+ ADD TASK",n.addEventListener("click",(()=>{d("task")})),e.append(n)}function d(s){const n=document.querySelector(`.${s}_popup`),i=document.querySelector(`#${s}_form`),a=document.querySelector(".background"),d=document.querySelector(`#${s}_button`);n.classList.remove("hidden"),a.classList.remove("hidden"),d.addEventListener("click",(n=>{if(""!=i.name.value){if(n.preventDefault(),"project"==s)c.addProject(new e(i.name.value)),r(c.getList());else{let e=document.querySelector("section");c.addTask(e.id,new t(i.name.value,i.description.value,i.date.value,e.id)),o(c.getList().getProject(e.id))}u(s)}})),document.body.addEventListener("click",(t=>{"background"==t.target.classList&&u(s)}))}function u(t){const e=document.querySelector(".task_popup"),s=document.querySelector(".project_popup"),n=document.querySelector(".background"),i=document.querySelector(`#${t}_form`);e.classList.add("hidden"),s.classList.add("hidden"),n.classList.add("hidden"),"project"==t?i.name.value="":(i.name.value="",i.description.value="",i.date.value="")}function l(t){const e=document.createElement("div"),s=document.createElement("div"),n=document.createElement("h2"),i=document.createElement("p"),r=document.createElement("p"),a=document.createElement("input");return e.id=`card_${t.getName().replaceAll(" ","_")}`,s.classList.add("element"),n.textContent=t.getName(),i.textContent=t.getDescription(),r.textContent=t.getDueDate(),a.type="radio",a.id=`${t.getName().replaceAll(" ","_")}_check`,a.addEventListener("click",(e=>{let s=document.querySelector(`#card_${t.getName().replaceAll(" ","_")}`),n=c.getList().getProject(s.parentNode.id);s.style.transform="translateX(150%)",s.style.transition="transform 0.4s ease-in-out",c.deleteTask(n.getTitle(),t.getName()),setTimeout((()=>{o(n)}),400)})),s.append(n,i,r),e.append(s,a),e}document.addEventListener("DOMContentLoaded",(function(){let t=c.getList(),e=t.getProject("Todo");r(),o(e)}))})();